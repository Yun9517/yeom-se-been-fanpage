"use strict";(self.webpackChunkyeom_se_been_fanpage=self.webpackChunkyeom_se_been_fanpage||[]).push([[679],{457:(e,s,r)=>{r.d(s,{A:()=>$});var n=r(8139),t=r.n(n),a=r(5043),i=r(1969),o=r(7852),c=r(2306);function l(e,s){return Array.isArray(e)?e.includes(s):e===s}const d=a.createContext({});d.displayName="AccordionContext";const x=d;var h=r(579);const m=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:i,children:d,eventKey:m,...u}=e;const{activeEventKey:f}=(0,a.useContext)(x);return n=(0,o.oU)(n,"accordion-collapse"),(0,h.jsx)(c.A,{ref:s,in:l(f,m),...u,className:t()(i,n),children:(0,h.jsx)(r,{children:a.Children.only(d)})})});m.displayName="AccordionCollapse";const u=m,f=a.createContext({eventKey:""});f.displayName="AccordionItemContext";const j=f,v=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:i,onEnter:c,onEntering:l,onEntered:d,onExit:x,onExiting:m,onExited:f,...v}=e;n=(0,o.oU)(n,"accordion-body");const{eventKey:y}=(0,a.useContext)(j);return(0,h.jsx)(u,{eventKey:y,onEnter:c,onEntering:l,onEntered:d,onExit:x,onExiting:m,onExited:f,children:(0,h.jsx)(r,{ref:s,...v,className:t()(i,n)})})});v.displayName="AccordionBody";const y=v;const p=a.forwardRef((e,s)=>{let{as:r="button",bsPrefix:n,className:i,onClick:c,...d}=e;n=(0,o.oU)(n,"accordion-button");const{eventKey:m}=(0,a.useContext)(j),u=function(e,s){const{activeEventKey:r,onSelect:n,alwaysOpen:t}=(0,a.useContext)(x);return a=>{let i=e===r?null:e;t&&(i=Array.isArray(r)?r.includes(e)?r.filter(s=>s!==e):[...r,e]:[e]),null==n||n(i,a),null==s||s(a)}}(m,c),{activeEventKey:f}=(0,a.useContext)(x);return"button"===r&&(d.type="button"),(0,h.jsx)(r,{ref:s,onClick:u,...d,"aria-expanded":Array.isArray(f)?f.includes(m):m===f,className:t()(i,n,!l(f,m)&&"collapsed")})});p.displayName="AccordionButton";const A=p,N=a.forwardRef((e,s)=>{let{as:r="h2","aria-controls":n,bsPrefix:a,className:i,children:c,onClick:l,...d}=e;return a=(0,o.oU)(a,"accordion-header"),(0,h.jsx)(r,{ref:s,...d,className:t()(i,a),children:(0,h.jsx)(A,{onClick:l,"aria-controls":n,children:c})})});N.displayName="AccordionHeader";const b=N,g=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:i,eventKey:c,...l}=e;n=(0,o.oU)(n,"accordion-item");const d=(0,a.useMemo)(()=>({eventKey:c}),[c]);return(0,h.jsx)(j.Provider,{value:d,children:(0,h.jsx)(r,{ref:s,...l,className:t()(i,n)})})});g.displayName="AccordionItem";const C=g,w=a.forwardRef((e,s)=>{const{as:r="div",activeKey:n,bsPrefix:c,className:l,onSelect:d,flush:m,alwaysOpen:u,...f}=(0,i.Zw)(e,{activeKey:"onSelect"}),j=(0,o.oU)(c,"accordion"),v=(0,a.useMemo)(()=>({activeEventKey:n,onSelect:d,alwaysOpen:u}),[n,d,u]);return(0,h.jsx)(x.Provider,{value:v,children:(0,h.jsx)(r,{ref:s,...f,className:t()(l,j,m&&`${j}-flush`)})})});w.displayName="Accordion";const $=Object.assign(w,{Button:A,Collapse:u,Item:C,Header:b,Body:y})},1719:(e,s,r)=>{r.d(s,{A:()=>A});var n=r(8139),t=r.n(n),a=r(5043),i=r(1969),o=r(6618),c=r(7852),l=r(4488),d=r(579);const x=(0,l.A)("h4");x.displayName="DivStyledAsH4";const h=a.forwardRef((e,s)=>{let{className:r,bsPrefix:n,as:a=x,...i}=e;return n=(0,c.oU)(n,"alert-heading"),(0,d.jsx)(a,{ref:s,className:t()(r,n),...i})});h.displayName="AlertHeading";const m=h;var u=r(7071);const f=a.forwardRef((e,s)=>{let{className:r,bsPrefix:n,as:a=u.A,...i}=e;return n=(0,c.oU)(n,"alert-link"),(0,d.jsx)(a,{ref:s,className:t()(r,n),...i})});f.displayName="AlertLink";const j=f;var v=r(8072),y=r(5632);const p=a.forwardRef((e,s)=>{const{bsPrefix:r,show:n=!0,closeLabel:a="Close alert",closeVariant:l,className:x,children:h,variant:m="primary",onClose:u,dismissible:f,transition:j=v.A,...p}=(0,i.Zw)(e,{show:"onClose"}),A=(0,c.oU)(r,"alert"),N=(0,o.A)(e=>{u&&u(!1,e)}),b=!0===j?v.A:j,g=(0,d.jsxs)("div",{role:"alert",...b?void 0:p,ref:s,className:t()(x,A,m&&`${A}-${m}`,f&&`${A}-dismissible`),children:[f&&(0,d.jsx)(y.A,{onClick:N,"aria-label":a,variant:l}),h]});return b?(0,d.jsx)(b,{unmountOnExit:!0,...p,ref:void 0,in:n,children:g}):n?g:null});p.displayName="Alert";const A=Object.assign(p,{Link:j,Heading:m})},3679:(e,s,r)=>{r.r(s),r.d(s,{default:()=>u});var n=r(5043),t=r(791),a=r(6667),i=r(8279),o=r(3519),c=r(7417),l=r(1719),d=r(4196),x=r(457),h=r(184),m=r(579);const u=()=>{const[e,s]=(0,i.hD)(t.j),[r,u]=(0,n.useState)([]),[f,j]=(0,n.useState)(!0),[v,y]=(0,n.useState)(null),[p,A]=(0,n.useState)("createdAt"),[N,b]=(0,n.useState)("desc");(0,n.useEffect)(()=>{(async()=>{if(!s){if(!e)return j(!1),void y("\u8acb\u5148\u767b\u5165\u4ee5\u67e5\u770b\u904a\u6232\u7d00\u9304\u3002");try{const s=(0,a.P)((0,a.rJ)(t.db,"scores"),(0,a._M)("userId","==",e.uid),(0,a.My)(p,N)),r=(await(0,a.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));u(r)}catch(r){console.error("Error fetching quiz history:",r),y("\u7121\u6cd5\u8f09\u5165\u904a\u6232\u7d00\u9304\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002")}finally{j(!1)}}})()},[e,s,p,N]);const g=e=>{e===p?b("asc"===N?"desc":"asc"):(A(e),b("desc"))};if(s)return(0,m.jsxs)(o.A,{className:"mt-5 text-center",children:[(0,m.jsx)(c.A,{animation:"border",variant:"light"}),(0,m.jsx)("p",{className:"text-white-50 mt-2",children:"\u8f09\u5165\u4f7f\u7528\u8005\u72c0\u614b..."})]});if(f)return(0,m.jsxs)(o.A,{className:"mt-5 text-center",children:[(0,m.jsx)(c.A,{animation:"border",variant:"light"}),(0,m.jsx)("p",{className:"text-white-50 mt-2",children:"\u8f09\u5165\u904a\u6232\u7d00\u9304\u4e2d..."})]});if(v)return(0,m.jsx)(o.A,{className:"mt-5",children:(0,m.jsx)(l.A,{variant:"danger",children:v})});if(!e)return(0,m.jsx)(o.A,{className:"mt-5",children:(0,m.jsx)(l.A,{variant:"info",children:"\u8acb\u767b\u5165\u4ee5\u67e5\u770b\u60a8\u7684\u904a\u6232\u7d00\u9304\u3002"})});if(e.isAnonymous)return(0,m.jsx)(o.A,{className:"mt-5",children:(0,m.jsx)(l.A,{variant:"info",children:"\u60a8\u76ee\u524d\u4ee5\u8a2a\u5ba2\u6a21\u5f0f\u767b\u5165\u3002\u5982\u9700\u67e5\u770b\u4e26\u5132\u5b58\u904a\u6232\u7d00\u9304\uff0c\u8acb\u4f7f\u7528 Google \u5e33\u6236\u767b\u5165\u3002"})});const C=r.length,w=r.reduce((e,s)=>Math.max(e,s.score),0),$=C>0?(r.reduce((e,s)=>e+s.score,0)/C).toFixed(2):0;return(0,m.jsxs)(o.A,{className:"mt-5 leaderboard-container",children:[(0,m.jsx)("h2",{children:"\u6211\u7684\u904a\u6232\u7d00\u9304"}),(0,m.jsxs)("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"#343a40",color:"#e9ecef"},children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u7e3d\u904a\u6232\u6b21\u6578:"})," ",C]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u6700\u9ad8\u5206\u6578:"})," ",w]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u5e73\u5747\u5206\u6578:"})," ",$]})]}),0===r.length?(0,m.jsx)(l.A,{variant:"info",children:"\u60a8\u9084\u6c92\u6709\u4efb\u4f55\u904a\u6232\u7d00\u9304\u3002"}):(0,m.jsxs)(d.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,variant:"dark",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsxs)("th",{onClick:()=>g("createdAt"),style:{cursor:"pointer"},children:["\u65e5\u671f ","createdAt"===p&&("asc"===N?"\u25b2":"\u25bc")]}),(0,m.jsxs)("th",{onClick:()=>g("score"),style:{cursor:"pointer"},children:["\u5206\u6578 ","score"===p&&("asc"===N?"\u25b2":"\u25bc")]}),(0,m.jsx)("th",{children:"\u4f5c\u7b54\u7d50\u679c"})]})}),(0,m.jsx)("tbody",{children:r.map(e=>{var s;return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleDateString()}),(0,m.jsx)("td",{children:e.score}),(0,m.jsx)("td",{children:(0,m.jsx)(x.A,{className:"quiz-history-accordion",children:(0,m.jsxs)(x.A.Item,{eventKey:"0",children:[(0,m.jsx)(x.A.Header,{children:"\u67e5\u770b\u8a73\u60c5"}),(0,m.jsx)(x.A.Body,{children:e.userAnswers&&e.userAnswers.length>0?e.userAnswers.map((e,s)=>(0,m.jsxs)("div",{className:"mb-2 p-2 border rounded",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u554f\u984c:"})," ",e.question]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u4f60\u7684\u7b54\u6848:"})," ",(0,m.jsxs)("span",{style:{color:e.isCorrect?"#28a745":"#dc3545"},children:[e.userAnswer," ",e.isCorrect?(0,m.jsx)(h.A7C,{color:"#28a745"}):(0,m.jsx)(h._Hm,{color:"#dc3545"})]})]}),!e.isCorrect&&(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"\u6b63\u78ba\u7b54\u6848:"})," ",(0,m.jsx)("span",{style:{color:"#28a745"},children:e.correctAnswer})]})]},s)):(0,m.jsx)("p",{children:"\u7121\u8a73\u7d30\u4f5c\u7b54\u7d50\u679c\u3002"})})]})})})]},e.id)})})]})]})}},4196:(e,s,r)=>{r.d(s,{A:()=>l});var n=r(8139),t=r.n(n),a=r(5043),i=r(7852),o=r(579);const c=a.forwardRef((e,s)=>{let{bsPrefix:r,className:n,striped:a,bordered:c,borderless:l,hover:d,size:x,variant:h,responsive:m,...u}=e;const f=(0,i.oU)(r,"table"),j=t()(n,f,h&&`${f}-${h}`,x&&`${f}-${x}`,a&&`${f}-${"string"===typeof a?`striped-${a}`:"striped"}`,c&&`${f}-bordered`,l&&`${f}-borderless`,d&&`${f}-hover`),v=(0,o.jsx)("table",{...u,className:j,ref:s});if(m){let e=`${f}-responsive`;return"string"===typeof m&&(e=`${e}-${m}`),(0,o.jsx)("div",{className:e,children:v})}return v});c.displayName="Table";const l=c},7417:(e,s,r)=>{r.d(s,{A:()=>l});var n=r(8139),t=r.n(n),a=r(5043),i=r(7852),o=r(579);const c=a.forwardRef((e,s)=>{let{bsPrefix:r,variant:n,animation:a="border",size:c,as:l="div",className:d,...x}=e;r=(0,i.oU)(r,"spinner");const h=`${r}-${a}`;return(0,o.jsx)(l,{ref:s,...x,className:t()(d,h,c&&`${h}-${c}`,n&&`text-${n}`)})});c.displayName="Spinner";const l=c}}]);
//# sourceMappingURL=679.0f3cf2df.chunk.js.map