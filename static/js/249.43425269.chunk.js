"use strict";(self.webpackChunkyeom_se_been_fanpage=self.webpackChunkyeom_se_been_fanpage||[]).push([[249],{1719:(e,s,r)=>{r.d(s,{A:()=>g});var a=r(8139),t=r.n(a),i=r(5043),n=r(1969),l=r(6618),d=r(7852),c=r(4488),o=r(579);const m=(0,c.A)("h4");m.displayName="DivStyledAsH4";const x=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i=m,...n}=e;return a=(0,d.oU)(a,"alert-heading"),(0,o.jsx)(i,{ref:s,className:t()(r,a),...n})});x.displayName="AlertHeading";const f=x;var h=r(7071);const j=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i=h.A,...n}=e;return a=(0,d.oU)(a,"alert-link"),(0,o.jsx)(i,{ref:s,className:t()(r,a),...n})});j.displayName="AlertLink";const v=j;var N=r(8072),u=r(5632);const b=i.forwardRef((e,s)=>{const{bsPrefix:r,show:a=!0,closeLabel:i="Close alert",closeVariant:c,className:m,children:x,variant:f="primary",onClose:h,dismissible:j,transition:v=N.A,...b}=(0,n.Zw)(e,{show:"onClose"}),g=(0,d.oU)(r,"alert"),A=(0,l.A)(e=>{h&&h(!1,e)}),p=!0===v?N.A:v,y=(0,o.jsxs)("div",{role:"alert",...p?void 0:b,ref:s,className:t()(m,g,f&&`${g}-${f}`,j&&`${g}-dismissible`),children:[j&&(0,o.jsx)(u.A,{onClick:A,"aria-label":i,variant:c}),x]});return p?(0,o.jsx)(p,{unmountOnExit:!0,...b,ref:void 0,in:a,children:y}):a?y:null});b.displayName="Alert";const g=Object.assign(b,{Link:v,Heading:f})},3249:(e,s,r)=>{r.r(s),r.d(s,{default:()=>b});var a=r(5043),t=r(791),i=r(6667),n=r(8279),l=r(3519),d=r(7417),c=r(1719),o=r(5382),m=r(1072),x=r(615),f=r(8602),h=r(370),j=r(8628),v=r(184),N=r(6481),u=r(579);const b=()=>{const[e,s]=(0,n.hD)(t.j),[r,b]=(0,a.useState)({}),[g,A]=(0,a.useState)(!0),[p,y]=(0,a.useState)(null),[w,$]=(0,a.useState)("tier"),C=[...N.v].sort((e,s)=>{if(e.hidden&&!s.hidden)return 1;if(!e.hidden&&s.hidden)return-1;const a=r[e.id],t=r[s.id];if(a&&!t)return-1;if(!a&&t)return 1;if("tier"===w){var i,n;const r=(null===(i=N.B[e.tier])||void 0===i?void 0:i.order)||99;return((null===(n=N.B[s.tier])||void 0===n?void 0:n.order)||99)-r}if("date"===w){var l,d;const i=a?null===(l=r[`${e.id}Date`])||void 0===l?void 0:l.toDate():null,n=t?null===(d=r[`${s.id}Date`])||void 0===d?void 0:d.toDate():null;return i&&n?n.getTime()-i.getTime():i?-1:n?1:0}return 0});return(0,a.useEffect)(()=>{(async()=>{if(!s){if(!e)return A(!1),void y("\u8acb\u5148\u767b\u5165\u4ee5\u67e5\u770b\u6210\u5c31\u3002");try{const s=(0,i.H9)(t.db,"userAchievements",e.uid),r=await(0,i.x7)(s);r.exists()?b(r.data()):b({})}catch(r){console.error("Error fetching achievements:",r),y("\u7121\u6cd5\u8f09\u5165\u6210\u5c31\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002")}finally{A(!1)}}})()},[e,s]),s?(0,u.jsxs)(l.A,{className:"mt-5 text-center",children:[(0,u.jsx)(d.A,{animation:"border",variant:"light"}),(0,u.jsx)("p",{className:"text-white-50 mt-2",children:"\u8f09\u5165\u4f7f\u7528\u8005\u72c0\u614b..."})]}):g?(0,u.jsxs)(l.A,{className:"mt-5 text-center",children:[(0,u.jsx)(d.A,{animation:"border",variant:"light"}),(0,u.jsx)("p",{className:"text-white-50 mt-2",children:"\u8f09\u5165\u6210\u5c31\u4e2d..."})]}):p?(0,u.jsx)(l.A,{className:"mt-5",children:(0,u.jsx)(c.A,{variant:"danger",children:p})}):e?e.isAnonymous?(0,u.jsx)(l.A,{className:"mt-5",children:(0,u.jsx)(c.A,{variant:"info",children:"\u60a8\u76ee\u524d\u4ee5\u8a2a\u5ba2\u6a21\u5f0f\u767b\u5165\u3002\u5982\u9700\u67e5\u770b\u4e26\u5132\u5b58\u6210\u5c31\uff0c\u8acb\u4f7f\u7528 Google \u5e33\u6236\u767b\u5165\u3002"})}):(0,u.jsxs)(l.A,{className:"mt-5 leaderboard-container",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,u.jsx)("h2",{children:"\u6211\u7684\u6210\u5c31"}),(0,u.jsxs)(o.A,{children:[(0,u.jsxs)(o.A.Toggle,{variant:"secondary",id:"dropdown-basic",children:["\u6392\u5e8f\u65b9\u5f0f: ","tier"===w?"\u4f9d\u7b49\u7d1a":"\u4f9d\u53d6\u5f97\u6642\u9593"]}),(0,u.jsxs)(o.A.Menu,{children:[(0,u.jsx)(o.A.Item,{onClick:()=>$("tier"),children:"\u4f9d\u7b49\u7d1a"}),(0,u.jsx)(o.A.Item,{onClick:()=>$("date"),children:"\u4f9d\u53d6\u5f97\u6642\u9593"})]})]})]}),0===C.length?(0,u.jsx)(c.A,{variant:"info",children:"\u76ee\u524d\u6c92\u6709\u53ef\u89e3\u9396\u7684\u6210\u5c31\u3002"}):(0,u.jsx)(m.A,{xs:2,sm:2,md:3,lg:4,className:"g-4",children:C.map(e=>{var s;const a=r[e.id],t=null===(s=r[`${e.id}Date`])||void 0===s?void 0:s.toDate().toLocaleDateString(),i=e.progressField&&r[e.progressField]||0,n=a||!e.hidden?e.description:"???",l=a||!e.hidden?e.name:"???",d=(0,u.jsxs)(x.A,{id:`tooltip-${e.id}`,children:[(0,u.jsx)("strong",{children:l}),(0,u.jsx)("br",{}),n,(0,u.jsx)("br",{}),a?`\u89e3\u9396\u65e5\u671f: ${t}`:"\u5c1a\u672a\u89e3\u9396",e.progressField&&!a&&(e.hidden?(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)("br",{})," \u4f60\u6b63\u5728\u6162\u6162\u89e3\u9396\u4e2d "]}):(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)("br",{})," \u9032\u5ea6: ",i,"/",e.targetValue," "]}))]});return(0,u.jsx)(f.A,{className:"d-flex justify-content-center",children:(0,u.jsx)(h.A,{placement:"top",overlay:d,children:(0,u.jsx)(j.A,{className:`achievement-card ${a?"unlocked":"locked"} tier-${e.tier.toLowerCase()}`,children:(0,u.jsxs)(j.A.Body,{className:"text-center",children:[(0,u.jsx)("div",{className:"achievement-icon",children:a?(0,u.jsx)(v.Z0L,{size:50}):(0,u.jsx)(v.gZZ,{size:50,color:"#ccc"})}),(0,u.jsx)(j.A.Title,{className:"mt-2",children:l}),e.progressField&&!a&&(e.hidden?(0,u.jsx)("div",{className:"achievement-progress",children:"\u4f60\u6b63\u5728\u6162\u6162\u89e3\u9396\u4e2d"}):(0,u.jsxs)("div",{className:"achievement-progress",children:[i,"/",e.targetValue]}))]})})})},e.id)})})]}):(0,u.jsx)(l.A,{className:"mt-5",children:(0,u.jsx)(c.A,{variant:"info",children:"\u8acb\u767b\u5165\u4ee5\u67e5\u770b\u60a8\u7684\u6210\u5c31\u3002"})})}},7417:(e,s,r)=>{r.d(s,{A:()=>c});var a=r(8139),t=r.n(a),i=r(5043),n=r(7852),l=r(579);const d=i.forwardRef((e,s)=>{let{bsPrefix:r,variant:a,animation:i="border",size:d,as:c="div",className:o,...m}=e;r=(0,n.oU)(r,"spinner");const x=`${r}-${i}`;return(0,l.jsx)(c,{ref:s,...m,className:t()(o,x,d&&`${x}-${d}`,a&&`text-${a}`)})});d.displayName="Spinner";const c=d},8628:(e,s,r)=>{r.d(s,{A:()=>D});var a=r(8139),t=r.n(a),i=r(5043),n=r(7852),l=r(579);const d=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i="div",...d}=e;return a=(0,n.oU)(a,"card-body"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});d.displayName="CardBody";const c=d,o=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i="div",...d}=e;return a=(0,n.oU)(a,"card-footer"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});o.displayName="CardFooter";const m=o;var x=r(1778);const f=i.forwardRef((e,s)=>{let{bsPrefix:r,className:a,as:d="div",...c}=e;const o=(0,n.oU)(r,"card-header"),m=(0,i.useMemo)(()=>({cardHeaderBsPrefix:o}),[o]);return(0,l.jsx)(x.A.Provider,{value:m,children:(0,l.jsx)(d,{ref:s,...c,className:t()(a,o)})})});f.displayName="CardHeader";const h=f,j=i.forwardRef((e,s)=>{let{bsPrefix:r,className:a,variant:i,as:d="img",...c}=e;const o=(0,n.oU)(r,"card-img");return(0,l.jsx)(d,{ref:s,className:t()(i?`${o}-${i}`:o,a),...c})});j.displayName="CardImg";const v=j,N=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i="div",...d}=e;return a=(0,n.oU)(a,"card-img-overlay"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});N.displayName="CardImgOverlay";const u=N,b=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i="a",...d}=e;return a=(0,n.oU)(a,"card-link"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});b.displayName="CardLink";const g=b;var A=r(4488);const p=(0,A.A)("h6"),y=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i=p,...d}=e;return a=(0,n.oU)(a,"card-subtitle"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});y.displayName="CardSubtitle";const w=y,$=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i="p",...d}=e;return a=(0,n.oU)(a,"card-text"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});$.displayName="CardText";const C=$,P=(0,A.A)("h5"),k=i.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:i=P,...d}=e;return a=(0,n.oU)(a,"card-title"),(0,l.jsx)(i,{ref:s,className:t()(r,a),...d})});k.displayName="CardTitle";const R=k,U=i.forwardRef((e,s)=>{let{bsPrefix:r,className:a,bg:i,text:d,border:o,body:m=!1,children:x,as:f="div",...h}=e;const j=(0,n.oU)(r,"card");return(0,l.jsx)(f,{ref:s,...h,className:t()(a,j,i&&`bg-${i}`,d&&`text-${d}`,o&&`border-${o}`),children:m?(0,l.jsx)(c,{children:x}):x})});U.displayName="Card";const D=Object.assign(U,{Img:v,Title:R,Subtitle:w,Body:c,Link:g,Text:C,Header:h,Footer:m,ImgOverlay:u})}}]);
//# sourceMappingURL=249.43425269.chunk.js.map