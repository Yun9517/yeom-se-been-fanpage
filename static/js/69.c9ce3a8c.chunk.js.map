{"version":3,"file":"static/js/69.c9ce3a8c.chunk.js","mappings":"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","sources":["components/FanQuiz.js","firebase.js"],"sourcesContent":["\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { FiRefreshCcw, FiLink } from 'react-icons/fi';\nimport { FaLine } from 'react-icons/fa';\nimport { Spinner, Alert } from 'react-bootstrap';\nimport './FanQuiz.css';\n\nimport { db } from '../firebase';\nimport { collection, getDocs } from 'firebase/firestore';\n\n\n// Helper function to get random questions\nconst getRandomQuestions = (allQuestions, num = 5) => {\n  const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());\n  return shuffled.slice(0, num);\n};\n\nfunction FanQuiz() {\n  const [masterQuestions, setMasterQuestions] = useState([]);\n  const [questions, setQuestions] = useState([]);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [score, setScore] = useState(0);\n  const [showScore, setShowScore] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchQuestions = async () => {\n      try {\n        const querySnapshot = await getDocs(collection(db, \"quizzes\"));\n        const fetchedQuestions = querySnapshot.docs.map(doc => doc.data());\n        setMasterQuestions(fetchedQuestions);\n        setQuestions(getRandomQuestions(fetchedQuestions));\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error fetching questions from Firestore:\", err);\n        setError(\"無法載入題目，請稍後再試。\");\n        setLoading(false);\n      }\n    };\n    fetchQuestions();\n  }, []);\n\n  const handleAnswerOptionClick = (selectedOption) => {\n    if (selectedOption === questions[currentQuestion].answer) {\n      setScore(score + 1);\n    }\n\n    const nextQuestion = currentQuestion + 1;\n    if (nextQuestion < questions.length) {\n      setCurrentQuestion(nextQuestion);\n    } else {\n      setShowScore(true);\n    }\n  };\n\n  const resetQuiz = useCallback(() => {\n    setCurrentQuestion(0);\n    setScore(0);\n    setShowScore(false);\n    setQuestions(getRandomQuestions(masterQuestions));\n  }, [masterQuestions]);\n\n  const generateShareContent = () => {\n    const shareText = `我在 염세빈 粉絲小遊戲中獲得了 ${score} 分！快來挑戰看看你的分數！`;\n    const shareUrl = window.location.href;\n    return { shareText, shareUrl };\n  };\n\n  const handleShareLink = () => {\n    const { shareText, shareUrl } = generateShareContent();\n    const fullShareLink = `${shareText} ${shareUrl}`;\n    navigator.clipboard.writeText(fullShareLink).then(() => {\n      alert('分享連結已複製到剪貼簿！');\n    }).catch(err => {\n      console.error('無法複製分享連結:', err);\n    });\n  };\n\n  const handleShareLine = () => {\n    const { shareText, shareUrl } = generateShareContent();\n    const lineMessage = `${shareText} ${shareUrl}`;\n    const lineShareUrl = `https://line.me/R/msg/text/?${encodeURIComponent(lineMessage)}`;\n    window.open(lineShareUrl, '_blank');\n  };\n\n  // Use ImageWithFallback for the Open Graph image\n  const ogImageUrl = `yeomsebeen_field.jpg`; // Just the filename\n\n  return (\n    <div className=\"fan-quiz-container\">\n      <Helmet>\n        <title>염세빈 粉絲小遊戲！</title>\n        <meta property=\"og:title\" content=\"염세빈 粉絲小遊戲！\" />\n        <meta property=\"og:description\" content=\"快來挑戰看看你對廉世彬的了解程度！\" />\n        {/* For Open Graph image, we need the direct URL, so we construct it here */}\n        <meta property=\"og:image\" content={`https://storage.googleapis.com/yeom-se-been-fanpage-assets/${ogImageUrl}`} />\n        <meta property=\"og:url\" content={window.location.href} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:image\" content={`https://storage.googleapis.com/yeom-se-been-fanpage-assets/${ogImageUrl}`} />\n      </Helmet>\n      <h2>염세빈 粉絲小遊戲！</h2>\n\n      {loading && (\n        <div className=\"text-center\">\n          <Spinner animation=\"border\" variant=\"light\" />\n          <p className=\"text-white-50 mt-2\">載入中...</p>\n        </div>\n      )}\n      {error && <Alert variant=\"danger\">{error}</Alert>}\n\n      {!loading && !error && (\n        showScore ? (\n          <div className=\"score-section\">\n            <div className=\"score-text\">你獲得了 {score} 分，總分 {questions.length} 分！</div>\n            <div className=\"score-buttons\">\n              <button onClick={handleShareLink} className=\"quiz-button share-link-button\"><FiLink /></button>\n              <button onClick={resetQuiz} className=\"quiz-button play-again-button\"><FiRefreshCcw /></button>\n              <button onClick={handleShareLine} className=\"quiz-button share-line-button\"><FaLine /></button>\n            </div>\n          </div>\n        ) : (\n          questions.length > 0 && (\n            <div className=\"question-section\">\n              <div className=\"question-count\">\n                <span>問題 {currentQuestion + 1}</span>/{questions.length}\n              </div>\n              <div className=\"question-text\">\n                {questions[currentQuestion]?.question}\n              </div>\n              <div className=\"answer-section\">\n                {questions[currentQuestion]?.options.map((option, index) => (\n                  <button key={index} onClick={() => handleAnswerOptionClick(option)}>\n                    {option}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )\n        )\n      )}\n    </div>\n  );\n}\n\nexport default FanQuiz;\n","\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Cloud Firestore and get a reference to the service\nconst db = getFirestore(app);\n\nexport { db };\n"],"names":["getRandomQuestions","allQuestions","num","arguments","length","undefined","sort","Math","random","slice","_questions$currentQue","_questions$currentQue2","masterQuestions","setMasterQuestions","useState","questions","setQuestions","currentQuestion","setCurrentQuestion","score","setScore","showScore","setShowScore","loading","setLoading","error","setError","useEffect","async","fetchedQuestions","getDocs","collection","db","docs","map","doc","data","err","console","fetchQuestions","resetQuiz","useCallback","generateShareContent","shareText","shareUrl","window","location","href","ogImageUrl","_jsxs","className","children","Helmet","_jsx","property","content","name","Spinner","animation","variant","Alert","onClick","handleShareLink","fullShareLink","navigator","clipboard","writeText","then","alert","catch","FiLink","FiRefreshCcw","handleShareLine","lineShareUrl","encodeURIComponent","open","FaLine","question","options","option","index","selectedOption","answer","nextQuestion","handleAnswerOptionClick","app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getFirestore"],"sourceRoot":""}