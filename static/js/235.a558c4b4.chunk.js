"use strict";(self.webpackChunkyeom_se_been_fanpage=self.webpackChunkyeom_se_been_fanpage||[]).push([[235],{1290:(e,s,n)=>{n.d(s,{A:()=>i});var t=n(5043),a=n(6667),o=n(791);const i=(e,s)=>{const[n,i]=(0,t.useState)(null),[c,l]=(0,t.useState)(!0),[r,d]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async()=>{l(!0),d(null);try{const n=(0,a.H9)(o.db,e,s),t=await(0,a.x7)(n);t.exists()?(i(t.data()),console.log(`useFirestoreDocument: Fetched data for ${e}/${s}.`)):(i(null),console.log(`useFirestoreDocument: No document found for ${e}/${s}.`))}catch(n){console.error(`useFirestoreDocument: Error fetching document ${e}/${s}:`,n),d(`\u7121\u6cd5\u8f09\u5165 ${e} \u5167\u5bb9\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002`)}finally{l(!1)}})()},[e,s]),{data:n,loading:c,error:r}}},2616:(e,s,n)=>{n.r(s),n.d(s,{default:()=>g});var t=n(5043),a=n(2678),o=n(791),i=n(6667),c=n(1048),l=n(184),r=n(579);const d=e=>{let{chats:s,activeChatId:n,onSelectChat:t,onNewChat:a,onDeleteChat:o,isOpen:i}=e;return(0,r.jsxs)("div",{className:"chat-history-sidebar "+(i?"open":""),children:[(0,r.jsx)("button",{onClick:a,className:"new-chat-btn",children:"+ \u65b0\u589e\u5c0d\u8a71"}),(0,r.jsx)("ul",{className:"chat-history-list",children:s.map(e=>(0,r.jsxs)("li",{className:"chat-history-item "+(e.id===n?"active":""),onClick:()=>t(e.id),children:[(0,r.jsx)("span",{className:"chat-item-title",title:e.title,children:e.title}),(0,r.jsx)("button",{className:"delete-chat-btn",onClick:s=>{s.stopPropagation(),o(e.id)},title:"\u522a\u9664\u5c0d\u8a71",children:(0,r.jsx)(l.qbC,{})})]},e.id))})]})},u=e=>{let{messages:s,onSendMessage:n,isLoading:a,activeChatId:o,onToggleSidebar:i}=e;const[c,d]=(0,t.useState)(""),u=(0,t.useRef)(null);(0,t.useEffect)(()=>{u.current&&u.current.scrollIntoView({behavior:"smooth"})},[s]),(0,t.useEffect)(()=>{o||d("")},[o]);const h=()=>{""!==c.trim()&&(n(c),d(""))};return(0,r.jsxs)("div",{className:"chat-window-main",children:[(0,r.jsxs)("div",{className:"beentalk-header",children:[(0,r.jsx)("button",{className:"sidebar-toggle-btn",onClick:i,children:(0,r.jsx)(l.OXb,{})}),(0,r.jsx)("h2",{children:"\u5f6cTalk"}),(0,r.jsx)("p",{children:"\u6709\u60f3\u77e5\u9053\u7684\u90fd\u7b49\u4f60\u4f86\u554f\uff01"})]}),(0,r.jsxs)("div",{className:"beentalk-messages",ref:u,children:[s.map((e,s)=>(0,r.jsx)("div",{className:`message ${e.sender}`,children:e.text},s)),a&&(0,r.jsx)("div",{className:"message bot",children:"\u8acb\u7a0d\u7b49..."})]}),(0,r.jsxs)("div",{className:"beentalk-input-area",children:[(0,r.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value)},onKeyPress:e=>{"Enter"!==e.key||a||h()},placeholder:"\u8f38\u5165\u4f60\u60f3\u554f\u7684\u554f\u984c...",disabled:a}),(0,r.jsx)("button",{onClick:h,disabled:a,className:"btn btn-theme-gradient",children:"\u50b3\u9001"})]})]})};var h=n(6045),m=n(1290);const g=()=>{const{user:e,authLoading:s}=(0,a.J)(),[n,l]=(0,t.useState)([]),[g,b]=(0,t.useState)(null),[x,f]=(0,t.useState)([]),[y,j]=(0,t.useState)(!1),[C,p]=(0,t.useState)(null),[v,S]=(0,t.useState)(!1),{data:w,loading:k}=(0,m.A)("pages","about");(0,t.useEffect)(()=>{const e="AIzaSyApnG7hMqjd5XRgoEkWSiSWny75or1WzhQ";if(e){const s=new c.ij(e);p(s)}},[]),(0,t.useEffect)(()=>{if(!e||e.isAnonymous)return l([]),b(null),void f([]);const s=(0,i.P)((0,i.rJ)(o.db,"users",e.uid,"chats"),(0,i.My)("createdAt","desc")),n=(0,i.aQ)(s,e=>{const s=e.docs.map(e=>({id:e.id,...e.data()}));l(s)});let t=()=>{};return g?t=(0,i.aQ)((0,i.H9)(o.db,"users",e.uid,"chats",g),e=>{e.exists()&&f(e.data().messages||[])}):f([]),()=>{n(),t()}},[e,g]);const N=e=>{b(e),S(!1)},T=()=>{b(null),f([]),S(!1)},$=async s=>{e&&!e.isAnonymous&&s&&window.confirm("\u60a8\u78ba\u5b9a\u8981\u522a\u9664\u9019\u6bb5\u5c0d\u8a71\u55ce\uff1f")&&(await(0,i.kd)((0,i.H9)(o.db,"users",e.uid,"chats",s)),g===s&&T())},A=async s=>{const n=!e||e.isAnonymous;if(!C||!n&&k)return;const t={sender:"user",text:s};j(!0);const a=[...x,t];f(a);const c=C.getGenerativeModel({model:"gemini-1.5-flash"});let l="";w&&(l=`\n\u4ee5\u4e0b\u662f\u7db2\u7ad9\u95dc\u65bc\u5ec9\u4e16\u5f6c\u7684\u4ecb\u7d39\u5167\u5bb9\uff0c\u8acb\u53c3\u8003\u9019\u4e9b\u8cc7\u8a0a\u4f86\u56de\u7b54\u554f\u984c\uff1a\n${w.section2022Title}: ${w.section2022Content}\n${w.section2023Title}: ${w.section2023Content}\n${w.section2025Title}: ${w.section2025Content}\n`);const r=`\u4f60\u662f\u4e00\u4f4d\u71b1\u60c5\u4e14\u6a02\u65bc\u52a9\u4eba\u7684\u52a9\u7406\uff0c\u4e5f\u662f\u5566\u5566\u968a\u54e1\u5ec9\u4e16\u5f6c\uff08\u5ec9\u4e16\u5f6c\uff09\u7684\u8d85\u7d1a\u7c89\u7d72\u3002\u4f60\u7684\u76ee\u6a19\u662f\u7cbe\u7c21\u7684\u56de\u7b54\u6709\u95dc\u5979\u7684\u554f\u984c\u3002\u5982\u679c\u554f\u984c\u8207\u5979\u7121\u95dc\uff0c\u8acb\u79ae\u8c8c\u5730\u62d2\u7d55\u4e26\u5c07\u8a71\u984c\u5f15\u5c0e\u56de\u5ec9\u4e16\u5f6c\u3002 ${n?"\u5728\u56de\u7b54\u5b8c\u554f\u984c\u5f8c\uff0c\u8acb\u7528\u53cb\u5584\u4e14\u7c21\u77ed\u7684\u8a9e\u6c23\uff0c\u6eab\u99a8\u5730\u63d0\u9192\u4f7f\u7528\u8005\u300c\u5c0d\u4e86!!\u767b\u5165\u5f8c\u5c31\u53ef\u4ee5\u4fdd\u5b58\u6211\u5011\u7684\u5c0d\u8a71\u7d00\u9304\u5594\uff01\u300d\uff0c\u4f46\u5982\u679c\u4f7f\u7528\u8005\u53ea\u662f\u7c21\u55ae\u554f\u5019(\u4f8b\u5982:\u4f60\u597d)\uff0c\u5247\u4e0d\u9700\u63d0\u9192\u3002":""}\n\n${l}\n\n\u4ee5\u4e0b\u662f\u56fa\u5b9a\u7684\u57fa\u672c\u8cc7\u6599\uff1a\n\u51fa\u751f: 2002\u5e744\u670823\u65e5, \u97d3\u570b\u9996\u723e\n\u8eab\u9ad8: 166cm\n\u5b78\u6b77: \u767d\u77f3\u85dd\u8853\u5927\u5b78 \u5be6\u7528\u97f3\u6a02\u7cfb\n\u51fa\u9053\u65e5\u671f: 2022\u5e74\nMBTI: ISTP\nInstagram: beena._s2\nInstagram\u7c89\u7d72\u6578: \u7834\u5341\u842c\u4eba\uff0c\u9084\u5728\u589e\u52a0\u5537!!\nThreads: beena._s2\uff0c\u963f\u5f6c\u6703\u5e38\u5e38\u8ddf\u7c89\u7d72\u5011\u4e92\u52d5\u5537!!\nTwitter: \u6c92\u5728\u7528\uff0c\u8acb\u53bbIG\u6216Thread\u627e\u963f\u5f6c\nFB: \u6c92\u5728\u7528\uff0c\u8acb\u53bbIG\u6216Thread\u627e\u963f\u5f6c\nYouTube: https://www.youtube.com/@MyAsteroids2\n\u5922\u60f3: \u6210\u70ba\u4e00\u540d\u512a\u79c0\u7684\u97f3\u6a02\u4eba\u548c\u5566\u5566\u968a\u54e1\uff0c\u4f60\u77e5\u9053\u55ce\uff0c\u5982\u679c\u963f\u5f6c\u6c92\u7576\u5566\u5566\u968a\uff0c\u6703\u60f3\u53bb\u7576\u6b4c\u624b\u5462!!\n\u8208\u8da3: \u97f3\u6a02\u3001\u821e\u8e48\u3001\u904b\u52d5\u3001\u8207\u7c89\u7d72\u4e92\u52d5\n\u7279\u9577: \u821e\u8e48\u3001\u97f3\u6a02\u5275\u4f5c\u3001\u5566\u5566\u968a\u8868\u6f14\n\u559c\u6b61\u7684\u98df\u7269: \u97d3\u570b\u6599\u7406\u3001\u751c\u9ede\u3001\u53f0\u7063\u7684\u96de\u6392\u7b49\uff0c\u963f\u5f6c\u4e0d\u6311\u98df\n\n\u5566\u5566\u968a\u7d93\u6b77\uff1a\n2022\u5e74: KEPCO Vixtorm Volleyball Team, Hana Bank Women's Basketball Team\n2023\u5e74: \u8d77\u4e9e\u864e, \u9ad8\u967d\u7d22\u8afe\u5929\u7a7a\u69cd\u624b\n2024\u5e74: \u8d77\u4e9e\u864e, \u5b89\u990a\u6b63\u5b98\u5e84\u8d64\u7d05\u706b\u7bad\n2025\u5e74: \u6a02\u5929\u6843\u733f, NC\u6050\u9f8d\n\n\u97f3\u6a02\u4f5c\u54c1\uff1a\n2024\u5e74: Snooze - \uc0c8\ubcbd\uac10\uc131\n2025\u5e74: Snooze - Cherry Blooming\n\n\u660e\u661f\u8cfd\u7279\u6b8a\u7d93\u6b77:\n\u8207\u79b9\u6d19\u6f22\u3001\u6cb3\u667a\u5a9b\uff0c\u5728\u660e\u661f\u8cfd\u671f\u9593\u5728\u5916\u91ce\u958b\u5feb\u9583\u9910\u5ef3: \u597d\u539d\u908a\u301dHasubeen\u301e\uff0c\u5169\u5929\u90fd\u8ce3\u5149\u5149\u5537!!\n\u597d\u539d\u908a\u301dHasubeen\u301e: \u662f\u8ddf"\u97ff\u98df\u5929\u5802"\u96c6\u5718\u5408\u4f5c\u7684\u54c1\u724c\u5537!!\u7684\u5e97\u540d\u53d6\u81ea\u4e09\u4eba\u540d\u5b57\u7684\u8ae7\u97f3\uff0c\u8c61\u5fb5\u8457\u5979\u5011\u7684\u5408\u4f5c\u7cbe\u795e\uff0c\u4e5f\u5e0c\u671b\u6210\u70ba\u5927\u5bb6\u7684\u300c\u597d\u670b\u53cb\u3001\u597d\u9130\u5c45\u300d\u3002 \u4ed6\u5011\u4e5f\u53c3\u8207\u4e86\u5feb\u9583\u5e97\u7684\u4f01\u5283\u3001\u54c1\u724c\u3001\u5f62\u8c61\u8a2d\u8a08\uff0c\u4e26\u7531\u6cb3\u667a\u5a9b\u624b\u7e6a\u5e97\u5167\u4e3b\u8996\u89ba!\n\n\u8fd1\u6cc1:\n\u8ddf\u7ffb\u8b6f"\u7c92\u59d0"\u5e38\u5e38\u5f62\u5f71\u4e0d\u96e2\u7684\u88ab\u7c89\u7d72\u62cd\u5230\uff0c\u88ab\u7c89\u7d72\u8aaa\u8ddf\u7ffb\u8b6f\u662f\u96d9\u80de\u80ce\n\n\u554f\u984c\uff1a${s}`;try{const n=await c.generateContent(r),t=await n.response,l={sender:"bot",text:t.text()},d=[...a,l];if(f(d),e&&!e.isAnonymous){let n=g;if(n){const s=(0,i.H9)(o.db,"users",e.uid,"chats",n);await(0,i.mZ)(s,{messages:d})}else{const n=s.substring(0,20)+"...",t=await(0,i.gS)((0,i.rJ)(o.db,"users",e.uid,"chats"),{title:n,createdAt:(0,i.O5)(),messages:d});b(t.id)}}}catch(d){console.error("Error calling Gemini API:",d);let s="\u54ce\u5440\uff01\u5f6cTalk \u76ee\u524d\u6709\u9ede\u5fd9\u788c\uff0c\u5c31\u50cf\u5ec9\u4e16\u5f6c\u5728\u5834\u4e0a\u4e00\u6a23\u5206\u8eab\u4e4f\u8853\uff01\u9019\u662f\u500b\u66ab\u6642\u7684\u72c0\u6cc1\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u4e00\u6b21\u3002";d.message&&d.message.includes("[503]")&&(s="\u54ce\u5440\uff01\u5f6cTalk \u76ee\u524d\u6709\u9ede\u5fd9\u788c\uff0c\u5c31\u50cf\u5ec9\u4e16\u5f6c\u5728\u5834\u4e0a\u4e00\u6a23\u5206\u8eab\u4e4f\u8853\uff01\u9019\u662f\u500b\u66ab\u6642\u7684\u72c0\u6cc1\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u4e00\u6b21\u3002");const n={sender:"bot",text:s},t=[...a,n];if(f(t),e&&!e.isAnonymous&&g){const s=(0,i.H9)(o.db,"users",e.uid,"chats",g);await(0,i.mZ)(s,{messages:t})}}finally{j(!1)}};return s?(0,r.jsx)(h.A,{loading:!0}):e&&!e.isAnonymous?(0,r.jsxs)("div",{className:"chat-page-container",children:[(0,r.jsx)("div",{className:"page-overlay "+(v?"active":""),onClick:()=>S(!1)}),(0,r.jsx)(d,{chats:n,activeChatId:g,onSelectChat:N,onNewChat:T,onDeleteChat:$,isOpen:v}),(0,r.jsx)(u,{messages:x,onSendMessage:A,isLoading:y,activeChatId:g,onToggleSidebar:()=>S(!v)})]}):(0,r.jsx)("div",{className:"chat-page-container guest-mode",children:(0,r.jsx)(u,{messages:x,onSendMessage:A,isLoading:y,activeChatId:null,onToggleSidebar:()=>{}})})}}}]);
//# sourceMappingURL=235.a558c4b4.chunk.js.map