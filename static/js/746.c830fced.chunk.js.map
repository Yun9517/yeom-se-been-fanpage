{"version":3,"file":"static/js/746.c830fced.chunk.js","mappings":"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","sources":["hooks/useFirestoreCollection.js","../node_modules/react-bootstrap/esm/AlertHeading.js","../node_modules/react-bootstrap/esm/AlertLink.js","../node_modules/react-bootstrap/esm/Alert.js","components/NewsItem.js","components/News.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { collection, query, getDocs, onSnapshot } from 'firebase/firestore';\nimport { db } from '../firebase'; // 假設你的 firebase.js 導出了 db\n\nconst useFirestoreCollection = (collectionName, queryConstraints = [], liveUpdate = false) => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null); // Clear previous errors\n\n    const collectionRef = collection(db, collectionName);\n    let q = query(collectionRef, ...queryConstraints); // 應用傳入的查詢約束\n\n    const fetchData = async () => {\n      try {\n        const querySnapshot = await getDocs(q);\n        const fetchedData = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setData(fetchedData);\n        console.log(`useFirestoreCollection: Fetched data from ${collectionName}.`);\n      } catch (err) {\n        console.error(`useFirestoreCollection: Error fetching data from ${collectionName}:`, err);\n        setError(`無法載入 ${collectionName} 資料，請稍後再試。`);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    const setupLiveListener = () => {\n      const unsubscribe = onSnapshot(q, (querySnapshot) => {\n        const fetchedData = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data(),\n        }));\n        setData(fetchedData);\n        setLoading(false);\n        setError(null);\n        console.log(`useFirestoreCollection: Live update from ${collectionName}.`);\n      }, (err) => {\n        console.error(`useFirestoreCollection: Live update error for ${collectionName}:`, err);\n        setError(`即時更新 ${collectionName} 資料失敗。`);\n        setLoading(false);\n      });\n      return unsubscribe;\n    };\n\n    let unsubscribe = null;\n    if (liveUpdate) {\n      unsubscribe = setupLiveListener();\n    } else {\n      fetchData();\n    }\n\n    // Cleanup function for useEffect\n    return () => {\n      if (unsubscribe) {\n        unsubscribe(); // Unsubscribe from live listener if it was set up\n      }\n    };\n  }, [collectionName, queryConstraints, liveUpdate]); // 依賴項，當這些改變時重新執行 effect\n\n  return { data, loading, error };\n};\n\nexport default useFirestoreCollection;\n","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport divWithClassName from './divWithClassName';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = DivStyledAsH4,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-heading');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertHeading.displayName = 'AlertHeading';\nexport default AlertHeading;","\"use client\";\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst AlertLink = /*#__PURE__*/React.forwardRef(({\n  className,\n  bsPrefix,\n  as: Component = Anchor,\n  ...props\n}, ref) => {\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'alert-link');\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    className: classNames(className, bsPrefix),\n    ...props\n  });\n});\nAlertLink.displayName = 'AlertLink';\nexport default AlertLink;","\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AlertHeading from './AlertHeading';\nimport AlertLink from './AlertLink';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show = true,\n    closeLabel = 'Close alert',\n    closeVariant,\n    className,\n    children,\n    variant = 'primary',\n    onClose,\n    dismissible,\n    transition = Fade,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});","// src/components/NewsItem.js\nimport React from 'react';\nimport './NewsItem.css';\n\nfunction NewsItem({ date, title, content }) {\n  return (\n    <div className=\"news-item\">\n      <span className=\"news-date\">{date}</span>\n      <span className=\"news-title\">{title}</span>\n      <p className=\"news-content\">{content}</p>\n    </div>\n  );\n}\n\nexport default React.memo(NewsItem);\n","import React, { useState, useMemo } from 'react';\nimport { Container, Row, Col, Button, Alert } from 'react-bootstrap';\nimport { orderBy } from 'firebase/firestore';\nimport NewsItem from './NewsItem';\nimport LoadingSpinner from './LoadingSpinner';\nimport useFirestoreCollection from '../hooks/useFirestoreCollection';\n\nconst News = () => {\n  const newsQueryConstraints = useMemo(() => [\n    orderBy('date', 'desc')\n  ], []);\n\n  const { data: newsData, loading, error } = useFirestoreCollection(\n    'news',\n    newsQueryConstraints\n  );\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const visibleNews = isExpanded ? newsData : newsData.slice(0, 3);\n\n  return (\n    <section className=\"about-section section-2022 py-5\">\n      <Container>\n        {/* Manual News Section */}\n        <div className=\"mb-5\">\n          <h2 className=\"text-white\">站內消息</h2>\n          <div className=\"news-list\">\n            {loading && <LoadingSpinner loading={loading} />}\n            {error && <Alert variant=\"danger\">{error}</Alert>}\n            {!loading && !error && newsData.length === 0 && (\n              <div className=\"text-center text-white-50\">\n                <p>目前沒有最新消息。</p>\n              </div>\n            )}\n            {!loading && !error && newsData.length > 0 && visibleNews.map(item => (\n              <NewsItem\n                key={item.id}\n                date={item.date}\n                title={item.title}\n                content={item.content}\n              />\n            ))}\n          </div>\n          {newsData.length > 3 && !loading && !error && (\n            <div className=\"text-center mt-4\">\n              <Button variant=\"outline-light\" onClick={() => setIsExpanded(!isExpanded)}>\n                {isExpanded ? '收合舊消息' : '查看更多'}\n              </Button>\n            </div>\n          )}\n        </div>\n\n        <hr style={{ borderColor: 'rgba(255, 255, 255, 0.5)' }} />\n\n        {/* Social Media Section */}\n        <Row className=\"mt-5\">\n          <Col>\n            <div className=\"my-4\" style={{ overflow: 'hidden' }}>\n              <h2 className=\"text-white\">Threads 動態</h2>\n              <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n                {/* Elfsight Social Feed */}\n                <div dangerouslySetInnerHTML={{\n                  __html: `\n                    <div class=\"elfsight-app-84806fe0-be21-43f6-b389-27805bb9f9b0\" data-elfsight-app-lazy></div>\n                  `\n                }} />\n              </div>\n            </div>\n\n            <div className=\"my-4\" style={{ overflow: 'hidden' }}>\n              <h2 className=\"text-white\">Instagram 動態</h2>\n              {/* Elfsight Instagram Feed */}\n              <div dangerouslySetInnerHTML={{\n                __html: `\n                  <div class=\"elfsight-app-f67c5a06-db6b-42cc-b17e-87e56c3dea9f\" data-elfsight-app-lazy></div>\n                `\n              }} />\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    </section>\n  );\n};\n\nexport default News;"],"names":["collectionName","queryConstraints","arguments","length","undefined","liveUpdate","data","setData","useState","loading","setLoading","error","setError","useEffect","collectionRef","collection","db","q","query","unsubscribe","onSnapshot","querySnapshot","fetchedData","docs","map","doc","id","console","log","err","async","getDocs","fetchData","DivStyledAsH4","divWithClassName","displayName","AlertHeading","React","_ref","ref","className","bsPrefix","as","Component","props","useBootstrapPrefix","_jsx","classNames","AlertLink","Anchor","Alert","uncontrolledProps","show","closeLabel","closeVariant","children","variant","onClose","dismissible","transition","Fade","useUncontrolled","prefix","handleClose","useEventCallback","e","Transition","alert","_jsxs","role","CloseButton","onClick","unmountOnExit","in","Object","assign","Link","Heading","NewsItem","date","title","content","News","newsQueryConstraints","useMemo","orderBy","newsData","useFirestoreCollection","isExpanded","setIsExpanded","visibleNews","slice","Container","LoadingSpinner","item","Button","style","borderColor","Row","Col","overflow","display","justifyContent","dangerouslySetInnerHTML","__html"],"sourceRoot":""}