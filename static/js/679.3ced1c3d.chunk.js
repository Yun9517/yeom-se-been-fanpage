"use strict";(self.webpackChunkyeom_se_been_fanpage=self.webpackChunkyeom_se_been_fanpage||[]).push([[679],{457:(e,s,r)=>{r.d(s,{A:()=>$});var n=r(8139),t=r.n(n),a=r(5043),o=r(1969),c=r(7852),i=r(2306);function l(e,s){return Array.isArray(e)?e.includes(s):e===s}const d=a.createContext({});d.displayName="AccordionContext";const x=d;var h=r(579);const u=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:o,children:d,eventKey:u,...m}=e;const{activeEventKey:f}=(0,a.useContext)(x);return n=(0,c.oU)(n,"accordion-collapse"),(0,h.jsx)(i.A,{ref:s,in:l(f,u),...m,className:t()(o,n),children:(0,h.jsx)(r,{children:a.Children.only(d)})})});u.displayName="AccordionCollapse";const m=u,f=a.createContext({eventKey:""});f.displayName="AccordionItemContext";const j=f,v=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:o,onEnter:i,onEntering:l,onEntered:d,onExit:x,onExiting:u,onExited:f,...v}=e;n=(0,c.oU)(n,"accordion-body");const{eventKey:y}=(0,a.useContext)(j);return(0,h.jsx)(m,{eventKey:y,onEnter:i,onEntering:l,onEntered:d,onExit:x,onExiting:u,onExited:f,children:(0,h.jsx)(r,{ref:s,...v,className:t()(o,n)})})});v.displayName="AccordionBody";const y=v;const p=a.forwardRef((e,s)=>{let{as:r="button",bsPrefix:n,className:o,onClick:i,...d}=e;n=(0,c.oU)(n,"accordion-button");const{eventKey:u}=(0,a.useContext)(j),m=function(e,s){const{activeEventKey:r,onSelect:n,alwaysOpen:t}=(0,a.useContext)(x);return a=>{let o=e===r?null:e;t&&(o=Array.isArray(r)?r.includes(e)?r.filter(s=>s!==e):[...r,e]:[e]),null==n||n(o,a),null==s||s(a)}}(u,i),{activeEventKey:f}=(0,a.useContext)(x);return"button"===r&&(d.type="button"),(0,h.jsx)(r,{ref:s,onClick:m,...d,"aria-expanded":Array.isArray(f)?f.includes(u):u===f,className:t()(o,n,!l(f,u)&&"collapsed")})});p.displayName="AccordionButton";const A=p,N=a.forwardRef((e,s)=>{let{as:r="h2","aria-controls":n,bsPrefix:a,className:o,children:i,onClick:l,...d}=e;return a=(0,c.oU)(a,"accordion-header"),(0,h.jsx)(r,{ref:s,...d,className:t()(o,a),children:(0,h.jsx)(A,{onClick:l,"aria-controls":n,children:i})})});N.displayName="AccordionHeader";const b=N,C=a.forwardRef((e,s)=>{let{as:r="div",bsPrefix:n,className:o,eventKey:i,...l}=e;n=(0,c.oU)(n,"accordion-item");const d=(0,a.useMemo)(()=>({eventKey:i}),[i]);return(0,h.jsx)(j.Provider,{value:d,children:(0,h.jsx)(r,{ref:s,...l,className:t()(o,n)})})});C.displayName="AccordionItem";const g=C,w=a.forwardRef((e,s)=>{const{as:r="div",activeKey:n,bsPrefix:i,className:l,onSelect:d,flush:u,alwaysOpen:m,...f}=(0,o.Zw)(e,{activeKey:"onSelect"}),j=(0,c.oU)(i,"accordion"),v=(0,a.useMemo)(()=>({activeEventKey:n,onSelect:d,alwaysOpen:m}),[n,d,m]);return(0,h.jsx)(x.Provider,{value:v,children:(0,h.jsx)(r,{ref:s,...f,className:t()(l,j,u&&`${j}-flush`)})})});w.displayName="Accordion";const $=Object.assign(w,{Button:A,Collapse:m,Item:g,Header:b,Body:y})},1719:(e,s,r)=>{r.d(s,{A:()=>A});var n=r(8139),t=r.n(n),a=r(5043),o=r(1969),c=r(6618),i=r(7852),l=r(4488),d=r(579);const x=(0,l.A)("h4");x.displayName="DivStyledAsH4";const h=a.forwardRef((e,s)=>{let{className:r,bsPrefix:n,as:a=x,...o}=e;return n=(0,i.oU)(n,"alert-heading"),(0,d.jsx)(a,{ref:s,className:t()(r,n),...o})});h.displayName="AlertHeading";const u=h;var m=r(7071);const f=a.forwardRef((e,s)=>{let{className:r,bsPrefix:n,as:a=m.A,...o}=e;return n=(0,i.oU)(n,"alert-link"),(0,d.jsx)(a,{ref:s,className:t()(r,n),...o})});f.displayName="AlertLink";const j=f;var v=r(8072),y=r(5632);const p=a.forwardRef((e,s)=>{const{bsPrefix:r,show:n=!0,closeLabel:a="Close alert",closeVariant:l,className:x,children:h,variant:u="primary",onClose:m,dismissible:f,transition:j=v.A,...p}=(0,o.Zw)(e,{show:"onClose"}),A=(0,i.oU)(r,"alert"),N=(0,c.A)(e=>{m&&m(!1,e)}),b=!0===j?v.A:j,C=(0,d.jsxs)("div",{role:"alert",...b?void 0:p,ref:s,className:t()(x,A,u&&`${A}-${u}`,f&&`${A}-dismissible`),children:[f&&(0,d.jsx)(y.A,{onClick:N,"aria-label":a,variant:l}),h]});return b?(0,d.jsx)(b,{unmountOnExit:!0,...p,ref:void 0,in:n,children:C}):n?C:null});p.displayName="Alert";const A=Object.assign(p,{Link:j,Heading:u})},3679:(e,s,r)=>{r.r(s),r.d(s,{default:()=>m});var n=r(5043),t=r(791),a=r(6667),o=r(8279),c=r(3519),i=r(7417),l=r(1719),d=r(4196),x=r(457),h=r(184),u=r(579);const m=()=>{const[e]=(0,o.hD)(t.j),[s,r]=(0,n.useState)([]),[m,f]=(0,n.useState)(!0),[j,v]=(0,n.useState)(null),[y,p]=(0,n.useState)("createdAt"),[A,N]=(0,n.useState)("desc");(0,n.useEffect)(()=>{(async()=>{if(!e)return f(!1),void v("\u8acb\u5148\u767b\u5165\u4ee5\u67e5\u770b\u904a\u6232\u7d00\u9304\u3002");try{const s=(0,a.P)((0,a.rJ)(t.db,"scores"),(0,a._M)("userId","==",e.uid),(0,a.My)(y,A)),n=(await(0,a.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));r(n)}catch(s){console.error("Error fetching quiz history:",s),v("\u7121\u6cd5\u8f09\u5165\u904a\u6232\u7d00\u9304\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002")}finally{f(!1)}})()},[e,y,A]);const b=e=>{e===y?N("asc"===A?"desc":"asc"):(p(e),N("desc"))};if(m)return(0,u.jsxs)(c.A,{className:"mt-5 text-center",children:[(0,u.jsx)(i.A,{animation:"border",variant:"light"}),(0,u.jsx)("p",{className:"text-white-50 mt-2",children:"\u8f09\u5165\u904a\u6232\u7d00\u9304\u4e2d..."})]});if(j)return(0,u.jsx)(c.A,{className:"mt-5",children:(0,u.jsx)(l.A,{variant:"danger",children:j})});if(!e)return(0,u.jsx)(c.A,{className:"mt-5",children:(0,u.jsx)(l.A,{variant:"info",children:"\u8acb\u767b\u5165\u4ee5\u67e5\u770b\u60a8\u7684\u904a\u6232\u7d00\u9304\u3002"})});if(e.isAnonymous)return(0,u.jsx)(c.A,{className:"mt-5",children:(0,u.jsx)(l.A,{variant:"info",children:"\u60a8\u76ee\u524d\u4ee5\u8a2a\u5ba2\u6a21\u5f0f\u767b\u5165\u3002\u5982\u9700\u67e5\u770b\u4e26\u5132\u5b58\u904a\u6232\u7d00\u9304\uff0c\u8acb\u4f7f\u7528 Google \u5e33\u6236\u767b\u5165\u3002"})});const C=s.length,g=s.reduce((e,s)=>Math.max(e,s.score),0),w=C>0?(s.reduce((e,s)=>e+s.score,0)/C).toFixed(2):0;return(0,u.jsxs)(c.A,{className:"mt-5 leaderboard-container",children:[(0,u.jsx)("h2",{children:"\u6211\u7684\u904a\u6232\u7d00\u9304"}),(0,u.jsxs)("div",{className:"mb-4 p-3 rounded",style:{backgroundColor:"#343a40",color:"#e9ecef"},children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u7e3d\u904a\u6232\u6b21\u6578:"})," ",C]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u6700\u9ad8\u5206\u6578:"})," ",g]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u5e73\u5747\u5206\u6578:"})," ",w]})]}),0===s.length?(0,u.jsx)(l.A,{variant:"info",children:"\u60a8\u9084\u6c92\u6709\u4efb\u4f55\u904a\u6232\u7d00\u9304\u3002"}):(0,u.jsxs)(d.A,{striped:!0,bordered:!0,hover:!0,responsive:!0,variant:"dark",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsxs)("th",{onClick:()=>b("createdAt"),style:{cursor:"pointer"},children:["\u65e5\u671f ","createdAt"===y&&("asc"===A?"\u25b2":"\u25bc")]}),(0,u.jsxs)("th",{onClick:()=>b("score"),style:{cursor:"pointer"},children:["\u5206\u6578 ","score"===y&&("asc"===A?"\u25b2":"\u25bc")]}),(0,u.jsx)("th",{children:"\u4f5c\u7b54\u7d50\u679c"})]})}),(0,u.jsx)("tbody",{children:s.map(e=>{var s;return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:null===(s=e.createdAt)||void 0===s?void 0:s.toDate().toLocaleDateString()}),(0,u.jsx)("td",{children:e.score}),(0,u.jsx)("td",{children:(0,u.jsx)(x.A,{className:"quiz-history-accordion",children:(0,u.jsxs)(x.A.Item,{eventKey:"0",children:[(0,u.jsx)(x.A.Header,{children:"\u67e5\u770b\u8a73\u60c5"}),(0,u.jsx)(x.A.Body,{children:e.userAnswers&&e.userAnswers.length>0?e.userAnswers.map((e,s)=>(0,u.jsxs)("div",{className:"mb-2 p-2 border rounded",children:[(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u554f\u984c:"})," ",e.question]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u4f60\u7684\u7b54\u6848:"})," ",(0,u.jsxs)("span",{style:{color:e.isCorrect?"#28a745":"#dc3545"},children:[e.userAnswer," ",e.isCorrect?(0,u.jsx)(h.A7C,{color:"#28a745"}):(0,u.jsx)(h._Hm,{color:"#dc3545"})]})]}),!e.isCorrect&&(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"\u6b63\u78ba\u7b54\u6848:"})," ",(0,u.jsx)("span",{style:{color:"#28a745"},children:e.correctAnswer})]})]},s)):(0,u.jsx)("p",{children:"\u7121\u8a73\u7d30\u4f5c\u7b54\u7d50\u679c\u3002"})})]})})})]},e.id)})})]})]})}},4196:(e,s,r)=>{r.d(s,{A:()=>l});var n=r(8139),t=r.n(n),a=r(5043),o=r(7852),c=r(579);const i=a.forwardRef((e,s)=>{let{bsPrefix:r,className:n,striped:a,bordered:i,borderless:l,hover:d,size:x,variant:h,responsive:u,...m}=e;const f=(0,o.oU)(r,"table"),j=t()(n,f,h&&`${f}-${h}`,x&&`${f}-${x}`,a&&`${f}-${"string"===typeof a?`striped-${a}`:"striped"}`,i&&`${f}-bordered`,l&&`${f}-borderless`,d&&`${f}-hover`),v=(0,c.jsx)("table",{...m,className:j,ref:s});if(u){let e=`${f}-responsive`;return"string"===typeof u&&(e=`${e}-${u}`),(0,c.jsx)("div",{className:e,children:v})}return v});i.displayName="Table";const l=i},7417:(e,s,r)=>{r.d(s,{A:()=>l});var n=r(8139),t=r.n(n),a=r(5043),o=r(7852),c=r(579);const i=a.forwardRef((e,s)=>{let{bsPrefix:r,variant:n,animation:a="border",size:i,as:l="div",className:d,...x}=e;r=(0,o.oU)(r,"spinner");const h=`${r}-${a}`;return(0,c.jsx)(l,{ref:s,...x,className:t()(d,h,i&&`${h}-${i}`,n&&`text-${n}`)})});i.displayName="Spinner";const l=i}}]);
//# sourceMappingURL=679.3ced1c3d.chunk.js.map