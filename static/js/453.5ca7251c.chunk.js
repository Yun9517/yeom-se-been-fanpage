"use strict";(self.webpackChunkyeom_se_been_fanpage=self.webpackChunkyeom_se_been_fanpage||[]).push([[453],{1290:(e,s,r)=>{r.d(s,{A:()=>l});var a=r(5043),t=r(6667),n=r(791);const l=(e,s)=>{const[r,l]=(0,a.useState)(null),[o,i]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{i(!0),d(null);try{const r=(0,t.H9)(n.db,e,s),a=await(0,t.x7)(r);a.exists()?(l(a.data()),console.log(`useFirestoreDocument: Fetched data for ${e}/${s}.`)):(l(null),console.log(`useFirestoreDocument: No document found for ${e}/${s}.`))}catch(r){console.error(`useFirestoreDocument: Error fetching document ${e}/${s}:`,r),d(`\u7121\u6cd5\u8f09\u5165 ${e} \u5167\u5bb9\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002`)}finally{i(!1)}})()},[e,s]),{data:r,loading:o,error:c}}},1719:(e,s,r)=>{r.d(s,{A:()=>b});var a=r(8139),t=r.n(a),n=r(5043),l=r(1969),o=r(6618),i=r(7852),c=r(4488),d=r(579);const u=(0,c.A)("h4");u.displayName="DivStyledAsH4";const m=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n=u,...l}=e;return a=(0,i.oU)(a,"alert-heading"),(0,d.jsx)(n,{ref:s,className:t()(r,a),...l})});m.displayName="AlertHeading";const f=m;var x=r(7071);const h=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n=x.A,...l}=e;return a=(0,i.oU)(a,"alert-link"),(0,d.jsx)(n,{ref:s,className:t()(r,a),...l})});h.displayName="AlertLink";const N=h;var g=r(8072),v=r(5632);const j=n.forwardRef((e,s)=>{const{bsPrefix:r,show:a=!0,closeLabel:n="Close alert",closeVariant:c,className:u,children:m,variant:f="primary",onClose:x,dismissible:h,transition:N=g.A,...j}=(0,l.Zw)(e,{show:"onClose"}),b=(0,i.oU)(r,"alert"),p=(0,o.A)(e=>{x&&x(!1,e)}),A=!0===N?g.A:N,y=(0,d.jsxs)("div",{role:"alert",...A?void 0:j,ref:s,className:t()(u,b,f&&`${b}-${f}`,h&&`${b}-dismissible`),children:[h&&(0,d.jsx)(v.A,{onClick:p,"aria-label":n,variant:c}),m]});return A?(0,d.jsx)(A,{unmountOnExit:!0,...j,ref:void 0,in:a,children:y}):a?y:null});j.displayName="Alert";const b=Object.assign(j,{Link:N,Heading:f})},2557:(e,s,r)=>{r.d(s,{A:()=>H});var a,t=r(8139),n=r.n(t),l=r(3043),o=r(660),i=r(182),c=r(8260);function d(e){if((!a&&0!==a||e)&&o.A){var s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="50px",s.style.height="50px",s.style.overflow="scroll",document.body.appendChild(s),a=s.offsetWidth-s.clientWidth,document.body.removeChild(s)}return a}var u=r(5043);var m=r(6618),f=r(8293),x=r(9109),h=r(4232),N=r(8170),g=r(11),v=r(8072),j=r(7852),b=r(579);const p=u.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:t="div",...l}=e;return a=(0,j.oU)(a,"modal-body"),(0,b.jsx)(t,{ref:s,className:n()(r,a),...l})});p.displayName="ModalBody";const A=p;var y=r(1602);const w=u.forwardRef((e,s)=>{let{bsPrefix:r,className:a,contentClassName:t,centered:l,size:o,fullscreen:i,children:c,scrollable:d,...u}=e;r=(0,j.oU)(r,"modal");const m=`${r}-dialog`,f="string"===typeof i?`${r}-fullscreen-${i}`:`${r}-fullscreen`;return(0,b.jsx)("div",{...u,ref:s,className:n()(m,a,o&&`${r}-${o}`,l&&`${m}-centered`,d&&`${m}-scrollable`,i&&f),children:(0,b.jsx)("div",{className:n()(`${r}-content`,t),children:c})})});w.displayName="ModalDialog";const k=w,C=u.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:t="div",...l}=e;return a=(0,j.oU)(a,"modal-footer"),(0,b.jsx)(t,{ref:s,className:n()(r,a),...l})});C.displayName="ModalFooter";const $=C;var R=r(2258);const D=u.forwardRef((e,s)=>{let{bsPrefix:r,className:a,closeLabel:t="Close",closeButton:l=!1,...o}=e;return r=(0,j.oU)(r,"modal-header"),(0,b.jsx)(R.A,{ref:s,...o,className:n()(a,r),closeLabel:t,closeButton:l})});D.displayName="ModalHeader";const U=D;const P=(0,r(4488).A)("h4"),T=u.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:t=P,...l}=e;return a=(0,j.oU)(a,"modal-title"),(0,b.jsx)(t,{ref:s,className:n()(r,a),...l})});T.displayName="ModalTitle";const F=T;function E(e){return(0,b.jsx)(v.A,{...e,timeout:null})}function S(e){return(0,b.jsx)(v.A,{...e,timeout:null})}const B=u.forwardRef((e,s)=>{let{bsPrefix:r,className:a,style:t,dialogClassName:v,contentClassName:p,children:A,dialogAs:w=k,"data-bs-theme":C,"aria-labelledby":$,"aria-describedby":R,"aria-label":D,show:U=!1,animation:P=!0,backdrop:T=!0,keyboard:F=!0,onEscapeKeyDown:B,onShow:H,onHide:L,container:O,autoFocus:I=!0,enforceFocus:M=!0,restoreFocus:z=!0,restoreFocusOptions:_,onEntered:Z,onExit:W,onExiting:K,onEnter:V,onEntering:G,onExited:q,backdropClassName:J,manager:Q,...X}=e;const[Y,ee]=(0,u.useState)({}),[se,re]=(0,u.useState)(!1),ae=(0,u.useRef)(!1),te=(0,u.useRef)(!1),ne=(0,u.useRef)(null),[le,oe]=(0,u.useState)(null),ie=(0,f.A)(s,oe),ce=(0,m.A)(L),de=(0,j.Wz)();r=(0,j.oU)(r,"modal");const ue=(0,u.useMemo)(()=>({onHide:ce}),[ce]);function me(){return Q||(0,g.R)({isRTL:de})}function fe(e){if(!o.A)return;const s=me().getScrollbarWidth()>0,r=e.scrollHeight>(0,i.A)(e).documentElement.clientHeight;ee({paddingRight:s&&!r?d():void 0,paddingLeft:!s&&r?d():void 0})}const xe=(0,m.A)(()=>{le&&fe(le.dialog)});(0,x.A)(()=>{(0,c.A)(window,"resize",xe),null==ne.current||ne.current()});const he=()=>{ae.current=!0},Ne=e=>{ae.current&&le&&e.target===le.dialog&&(te.current=!0),ae.current=!1},ge=()=>{re(!0),ne.current=(0,h.A)(le.dialog,()=>{re(!1)})},ve=e=>{"static"!==T?te.current||e.target!==e.currentTarget?te.current=!1:null==L||L():(e=>{e.target===e.currentTarget&&ge()})(e)},je=(0,u.useCallback)(e=>(0,b.jsx)("div",{...e,className:n()(`${r}-backdrop`,J,!P&&"show")}),[P,J,r]),be={...t,...Y};be.display="block";return(0,b.jsx)(y.A.Provider,{value:ue,children:(0,b.jsx)(N.A,{show:U,ref:ie,backdrop:T,container:O,keyboard:!0,autoFocus:I,enforceFocus:M,restoreFocus:z,restoreFocusOptions:_,onEscapeKeyDown:e=>{F?null==B||B(e):(e.preventDefault(),"static"===T&&ge())},onShow:H,onHide:L,onEnter:(e,s)=>{e&&fe(e),null==V||V(e,s)},onEntering:(e,s)=>{null==G||G(e,s),(0,l.Ay)(window,"resize",xe)},onEntered:Z,onExit:e=>{null==ne.current||ne.current(),null==W||W(e)},onExiting:K,onExited:e=>{e&&(e.style.display=""),null==q||q(e),(0,c.A)(window,"resize",xe)},manager:me(),transition:P?E:void 0,backdropTransition:P?S:void 0,renderBackdrop:je,renderDialog:e=>(0,b.jsx)("div",{role:"dialog",...e,style:be,className:n()(a,r,se&&`${r}-static`,!P&&"show"),onClick:T?ve:void 0,onMouseUp:Ne,"data-bs-theme":C,"aria-label":D,"aria-labelledby":$,"aria-describedby":R,children:(0,b.jsx)(w,{...X,onMouseDown:he,className:v,contentClassName:p,children:A})})})})});B.displayName="Modal";const H=Object.assign(B,{Body:A,Header:U,Title:F,Footer:$,Dialog:k,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},6453:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var a=r(5043),t=r(1283),n=r(791),l=r(8279),o=r(3519),i=r(1719),c=r(5258),d=r(1072),u=r(8602),m=r(8628),f=r(2557),x=r(6045),h=r(184),N=(r(8736),r(6481)),g=r(1290),v=r(579);const j=()=>{var e,s;const[r,j]=(0,l.hD)(n.j),b=(0,t.Zp)(),[p,A]=(0,a.useState)("tier"),[y,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),{data:$,loading:R,error:D}=(0,g.A)("userAchievements",r?r.uid:null),U=D;(0,a.useEffect)(()=>{if(!j&&!r){const e=setTimeout(()=>{b("/")},3e3);return()=>clearTimeout(e)}},[r,j,b]);const P=(0,a.useMemo)(()=>$?[...N.vd].sort((e,s)=>{if(e.hidden&&!s.hidden)return 1;if(!e.hidden&&s.hidden)return-1;const r=$[e.id],a=$[s.id];if(r&&!a)return-1;if(!r&&a)return 1;if("tier"===p){var t,n;const r=(null===(t=N.Bc[e.tier])||void 0===t?void 0:t.order)||99;return((null===(n=N.Bc[s.tier])||void 0===n?void 0:n.order)||99)-r}if("date"===p){var l,o;const t=r?null===(l=$[`${e.id}Date`])||void 0===l?void 0:l.toDate():null,n=a?null===(o=$[`${s.id}Date`])||void 0===o?void 0:o.toDate():null;return t&&n?n.getTime()-t.getTime():t?-1:n?1:0}return 0}):[],[$,p]);return j?(console.log("Achievements: Loading user authentication status..."),(0,v.jsxs)(o.A,{className:"mt-5 text-center",children:[(0,v.jsx)(x.A,{}),(0,v.jsx)("p",{className:"mt-3",children:"\u8f09\u5165\u4f7f\u7528\u8005\u72c0\u614b..."})]})):r?R?(console.log("Achievements: Loading achievements data..."),(0,v.jsxs)(o.A,{className:"mt-5 text-center",children:[(0,v.jsx)(x.A,{}),(0,v.jsx)("p",{className:"mt-3",children:"\u8f09\u5165\u6210\u5c31\u8cc7\u6599..."})]})):r?U?(0,v.jsx)(o.A,{className:"mt-5",children:(0,v.jsx)(i.A,{variant:"danger",children:U})}):r.isAnonymous?(0,v.jsx)(o.A,{className:"mt-5",children:(0,v.jsx)(i.A,{variant:"info",children:"\u60a8\u76ee\u524d\u4ee5\u8a2a\u5ba2\u6a21\u5f0f\u767b\u5165\u3002\u5982\u9700\u67e5\u770b\u4e26\u5132\u5b58\u6210\u5c31\uff0c\u8acb\u4f7f\u7528 Google \u5e33\u6236\u767b\u5165\u3002"})}):(0,v.jsxs)(o.A,{className:"mt-5 leaderboard-container",children:[(0,v.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,v.jsx)("h2",{children:"\u6211\u7684\u6210\u5c31"}),(0,v.jsxs)(c.A,{children:[(0,v.jsxs)(c.A.Toggle,{variant:"secondary",id:"dropdown-basic",children:["\u6392\u5e8f\u65b9\u5f0f: ","tier"===p?"\u4f9d\u7b49\u7d1a":"\u4f9d\u53d6\u5f97\u6642\u9593"]}),(0,v.jsxs)(c.A.Menu,{children:[(0,v.jsx)(c.A.Item,{onClick:()=>A("tier"),children:"\u4f9d\u7b49\u7d1a"}),(0,v.jsx)(c.A.Item,{onClick:()=>A("date"),children:"\u4f9d\u53d6\u5f97\u6642\u9593"})]})]})]}),0===P.length?(0,v.jsx)(i.A,{variant:"info",children:"\u7e7c\u7e8c\u63a2\u7d22\u7db2\u7ad9\uff0c\u89e3\u9396\u4f60\u7684\u7b2c\u4e00\u500b\u6210\u5c31"}):(0,v.jsx)(d.A,{xs:2,sm:2,md:3,lg:4,className:"g-4",children:P.map(e=>{var s;const r=$&&$[e.id],a=$&&(null===(s=$[`${e.id}Date`])||void 0===s?void 0:s.toDate().toLocaleDateString()),t=e.progressField?$&&($[e.progressField]||0):0,n=r||!e.hidden?e.description:"???",l=r||!e.hidden?e.name:"???";return(0,v.jsx)(u.A,{className:"d-flex justify-content-center",children:(0,v.jsx)(m.A,{className:`achievement-card ${r?"unlocked":"locked"} tier-${e.tier.toLowerCase()}`,onClick:()=>{C({...e,isUnlocked:r,unlockDate:a,currentProgress:t,displayDescription:n,displayName:l}),w(!0)},style:{cursor:"pointer"},children:(0,v.jsxs)(m.A.Body,{className:"text-center",children:[(0,v.jsx)("div",{className:"achievement-icon",children:r?(0,v.jsx)(h.Z0L,{size:50}):(0,v.jsx)(h.gZZ,{size:50,color:"#ccc"})}),(0,v.jsx)(m.A.Title,{className:"mt-2",children:l}),e.progressField&&!r&&(e.hidden?(0,v.jsx)("div",{className:"achievement-progress",children:"\u4f60\u6b63\u5728\u6162\u6162\u89e3\u9396\u4e2d"}):(0,v.jsxs)("div",{className:"achievement-progress",children:[t,"/",e.targetValue]}))]})})},e.id)})}),(0,v.jsxs)(f.A,{show:y,onHide:()=>w(!1),centered:!0,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,className:"bg-dark text-white",children:(0,v.jsx)(f.A.Title,{children:null===k||void 0===k?void 0:k.displayName})}),(0,v.jsx)(f.A.Body,{className:"bg-dark text-white text-center",children:k&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mb-3",children:k.isUnlocked?(0,v.jsx)(h.Z0L,{size:80,color:null===(e=N.Bc[k.tier])||void 0===e?void 0:e.color,className:`icon-glow tier-${k.tier.toLowerCase()}`}):(0,v.jsx)(h.gZZ,{size:80,color:"#ccc",className:"icon-glow tier-locked"})}),(0,v.jsx)("p",{children:k.displayDescription}),(0,v.jsxs)("p",{children:[(0,v.jsx)("strong",{children:"\u7b49\u7d1a:"})," ",null===(s=N.Bc[k.tier])||void 0===s?void 0:s.name]}),k.isUnlocked?(0,v.jsxs)("p",{children:[(0,v.jsx)("strong",{children:"\u89e3\u9396\u65e5\u671f:"})," ",k.unlockDate]}):(0,v.jsx)("p",{children:"\u5c1a\u672a\u89e3\u9396"}),k.progressField&&!k.isUnlocked&&(k.hidden?(0,v.jsx)("p",{children:"\u4f60\u6b63\u5728\u6162\u6162\u89e3\u9396\u4e2d"}):(0,v.jsxs)("p",{children:[(0,v.jsx)("strong",{children:"\u9032\u5ea6:"})," ",k.currentProgress,"/",k.targetValue]}))]})}),(0,v.jsx)(f.A.Footer,{className:"bg-dark"})]})]}):(0,v.jsx)(o.A,{className:"mt-5",children:(0,v.jsx)(i.A,{variant:"warning",children:"\u8acb\u767b\u5165\u5f8c\u7e7c\u7e8c\u4f7f\u7528\u6b64\u529f\u80fd"})}):(0,v.jsx)(o.A,{className:"mt-5",children:(0,v.jsx)(i.A,{variant:"warning",children:"\u8acb\u767b\u5165\u5f8c\u7e7c\u7e8c\u4f7f\u7528\u6b64\u529f\u80fd"})})}},8628:(e,s,r)=>{r.d(s,{A:()=>P});var a=r(8139),t=r.n(a),n=r(5043),l=r(7852),o=r(579);const i=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...i}=e;return a=(0,l.oU)(a,"card-body"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});i.displayName="CardBody";const c=i,d=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...i}=e;return a=(0,l.oU)(a,"card-footer"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});d.displayName="CardFooter";const u=d;var m=r(1778);const f=n.forwardRef((e,s)=>{let{bsPrefix:r,className:a,as:i="div",...c}=e;const d=(0,l.oU)(r,"card-header"),u=(0,n.useMemo)(()=>({cardHeaderBsPrefix:d}),[d]);return(0,o.jsx)(m.A.Provider,{value:u,children:(0,o.jsx)(i,{ref:s,...c,className:t()(a,d)})})});f.displayName="CardHeader";const x=f,h=n.forwardRef((e,s)=>{let{bsPrefix:r,className:a,variant:n,as:i="img",...c}=e;const d=(0,l.oU)(r,"card-img");return(0,o.jsx)(i,{ref:s,className:t()(n?`${d}-${n}`:d,a),...c})});h.displayName="CardImg";const N=h,g=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n="div",...i}=e;return a=(0,l.oU)(a,"card-img-overlay"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});g.displayName="CardImgOverlay";const v=g,j=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n="a",...i}=e;return a=(0,l.oU)(a,"card-link"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});j.displayName="CardLink";const b=j;var p=r(4488);const A=(0,p.A)("h6"),y=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n=A,...i}=e;return a=(0,l.oU)(a,"card-subtitle"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});y.displayName="CardSubtitle";const w=y,k=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n="p",...i}=e;return a=(0,l.oU)(a,"card-text"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});k.displayName="CardText";const C=k,$=(0,p.A)("h5"),R=n.forwardRef((e,s)=>{let{className:r,bsPrefix:a,as:n=$,...i}=e;return a=(0,l.oU)(a,"card-title"),(0,o.jsx)(n,{ref:s,className:t()(r,a),...i})});R.displayName="CardTitle";const D=R,U=n.forwardRef((e,s)=>{let{bsPrefix:r,className:a,bg:n,text:i,border:d,body:u=!1,children:m,as:f="div",...x}=e;const h=(0,l.oU)(r,"card");return(0,o.jsx)(f,{ref:s,...x,className:t()(a,h,n&&`bg-${n}`,i&&`text-${i}`,d&&`border-${d}`),children:u?(0,o.jsx)(c,{children:m}):m})});U.displayName="Card";const P=Object.assign(U,{Img:N,Title:D,Subtitle:w,Body:c,Link:b,Text:C,Header:x,Footer:u,ImgOverlay:v})},8736:()=>{},9109:(e,s,r)=>{r.d(s,{A:()=>t});var a=r(5043);function t(e){const s=function(e){const s=(0,a.useRef)(e);return s.current=e,s}(e);(0,a.useEffect)(()=>()=>s.current(),[])}}}]);
//# sourceMappingURL=453.5ca7251c.chunk.js.map